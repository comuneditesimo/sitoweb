@page "/Backend/Homepage/Faq/Edit/{ID}"

@layout MainLayout

@using ICWebApp.Components.Components.Homepage.Backend.Person
@using ICWebApp.Components.Components.Homepage.Backend.Authority
@using ICWebApp.Components.Components.Homepage.Backend.Address
@using ICWebApp.Components.Components.Homepage.Backend.Theme

@if(Data != null && Languages != null)
{
    <div class="element-separator"></div>
    <div class="custom-background-default">
        <EditForm Model="Data">
            <DataAnnotationsValidator />
            <div class="form-group form-group-small">
                <div class="segment-title custom-color-primary">@TextProvider.Get("BACKEND_HOMEPAGE_FAQ_GENERAL")</div>
            </div>
            <div class="small-element-separator"></div>
            <LanguageInputSelector @bind-CurrentLanguage="@CurrentLanguage"></LanguageInputSelector>
            <div class="small-element-separator"></div>
            <div class="form-group form-group-small">
                <label class="form-label">@TextProvider.Get("BACKEND_HOMEPAGE_FAQ_QUESTION")</label>
            </div>
            <div class="form-group form-group-small">
                @if (Data.HOME_Faq_Extended != null && Data.HOME_Faq_Extended.Count() > 0 && CurrentLanguage != null)
                {

                    @if (string.IsNullOrEmpty(Data.HOME_Faq_Extended.FirstOrDefault(p => p.LANG_Language_ID == CurrentLanguage).Question) && ID == "New")
                    {
                        Data.HOME_Faq_Extended.FirstOrDefault(p => p.LANG_Language_ID == CurrentLanguage).Question = Data.HOME_Faq_Extended.FirstOrDefault(p => p.LANG_Language_ID != CurrentLanguage).Question;
                    }

                    <SfRichTextEditor @bind-Value="Data.HOME_Faq_Extended.FirstOrDefault(p => p.LANG_Language_ID == CurrentLanguage).Question" Height="150px">
                        <RichTextEditorToolbarSettings Items="@RichTextEditor.ToolsOnlyDecoration" />
                        <RichTextEditorPasteCleanupSettings Prompt="true" />
                    </SfRichTextEditor>
                }
            </div>
            <div class="small-element-separator"></div>
                <div class="form-group form-group-small">
                <label class="form-label">@TextProvider.Get("BACKEND_HOMEPAGE_FAQ_ANSWER")</label>
            </div>
            <div class="extra-small-element-separator"></div>
            <div class="form-group form-group-small">
                @if (Data.HOME_Faq_Extended != null && Data.HOME_Faq_Extended.Count() > 0 && CurrentLanguage != null)
                {

                    @if (string.IsNullOrEmpty(Data.HOME_Faq_Extended.FirstOrDefault(p => p.LANG_Language_ID == CurrentLanguage).Answer) && ID == "New")
                    {
                        Data.HOME_Faq_Extended.FirstOrDefault(p => p.LANG_Language_ID == CurrentLanguage).Answer = Data.HOME_Faq_Extended.FirstOrDefault(p => p.LANG_Language_ID != CurrentLanguage).Answer;
                    }

                    <SfRichTextEditor @bind-Value="Data.HOME_Faq_Extended.FirstOrDefault(p => p.LANG_Language_ID == CurrentLanguage).Answer" Height="350px">
                        <RichTextEditorToolbarSettings Items="@RichTextEditor.Tools" />
                        <RichTextEditorPasteCleanupSettings Prompt="true" />
                        <RichTextEditorImageSettings SaveUrl="@RichTextEditor.ImageSavePath" Path="@RichTextEditor.OpenPath" AllowedTypes="@RichTextEditor.AllowedTypes"></RichTextEditorImageSettings>
                    </SfRichTextEditor>
                }
            </div>      
            <div class="element-separator"></div>
            <div class="form-button-container-separated form-group-small">
                <TelerikButton ButtonType="ButtonType.Button" ThemeColor="Secondary" Icon="SvgIcon.X" Class="k-standalone-button"
                               OnClick="@Cancel">@TextProvider.Get("BUTTON_CANCEL")</TelerikButton>
                <TelerikButton ButtonType="ButtonType.Button" ThemeColor="Primary" Icon="SvgIcon.ArrowRight" Class="k-standalone-button"
                               OnClick="@Save">@TextProvider.Get("BUTTON_SAVE")</TelerikButton>
            </div>
            </EditForm>
        </div>
}